@model ZeroCode.Model.Sys.SysSampleDto

@{
    ViewBag.Title = "创建";
    Layout = "~/Views/Shared/_Layout_Edit.cshtml";
}


<script>
    $(function () {
        $("#btn-add").click({ "TestKey": "val" }, function (e) {
            $("#btn-submit").click();
            //$.ajax({
            //    url: "/SysSample/Create",
            //    type: "POST",
            //    data: $("#CreateForm").serialize(),
            //    dataType: "json",
            //    success: function (data, testStatus) {
            //        if (data.Status=="Success") {
            //            alert("添加成功啦");
            //            console.info(data);
            //            console.info(testStatus);
            //        } else {
            //            console.info(data.Message);
            //            console.info(testStatus);
            //        }
            //    },
            //    error: function (XMLHttpRequest, textStatus, errorThrown) {
            //        alert("请求发生异常");
            //        console.error("请求发生异常");
            //        console.info(XMLHttpRequest);
            //        console.info(textStatus);
            //        console.info(errorThrown);
            //    }
            //});
        })
    });

    function call_addSuccess(data, testStatus) {
        if (data.Status=="Success") {
            parent.pageObj.business.frameReturnByCreate("操作成功",true,true);
            
        } else {
            parent.pageObj.business.frameReturnByCreate(data.Message, false, false);
        }
    }
    function call_addError(XMLhttpRequest,textStatus,errorThrown) {
        parent.pageObj.business.frameReturnByCreate("请求发送异常", false, false);
    }

    
</script>

<div class="">
    <a id="btn-add" href="javascript:;" class="easyui-linkbutton" data-options="plain:true,iconCls:'icon-save' "></a>
    
</div>
@using (Ajax.BeginForm("Create", "SysSample", new AjaxOptions { OnSuccess = "call_addSuccess", HttpMethod = "POST", OnFailure = "call_addError", LoadingElementDuration = 300, LoadingElementId = "DivLoading" }))
{
    @Html.ValidationSummary(true)
    <table>
        <tr>
            <td>
                @Html.LabelFor(model => model.Id)
            </td>
            <td>
                @Html.EditorFor(model => model.Id)
            </td>
            <td>
                @Html.ValidationMessageFor(model => model.Id)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(model => model.Name)
            </td>
            <td>
                @Html.EditorFor(model => model.Name)
            </td>
            <td>
                @Html.ValidationMessageFor(model => model.Name)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(model => model.Age)
            </td>
            <td>
                @Html.EditorFor(model => model.Age)
            </td>
            <td>
                @Html.ValidationMessageFor(model => model.Age)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(model => model.Bir)
            </td>
            <td>
                @Html.EditorFor(model => model.Bir)
            </td>
            <td>
                @Html.ValidationMessageFor(model => model.Bir)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(model => model.Note)
            </td>
            <td>
                @Html.EditorFor(model => model.Note)
            </td>
            <td>
                @Html.ValidationMessageFor(model => model.Note)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(model => model.Photo)
            </td>
            <td>
                @Html.EditorFor(model => model.Photo)
            </td>
            <td>
                @Html.ValidationMessageFor(model => model.Photo)
            </td>
        </tr>
        <tr>
            <td colspan="3"><input id="btn-submit" type="submit" value="提交" /></td>
        </tr>
    </table>
}

<div id="DivLoading" style="border:1px solid #0094ff; display:none;background-color:burlywood; color:white; height:50px">
    loading div
</div>
